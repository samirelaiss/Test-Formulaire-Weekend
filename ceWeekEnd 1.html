<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire de Choix de Destination</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            /* Utilisation de la police Roboto pour le texte principal */
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            background-image: url('https://img.yellohvillage.fr/var/plain_site/storage/images/site_marchand/choisissez_votre_camping/par_ville/la_tranche_sur_mer/3264896-1-fre-FR/la_tranche_sur_mer.jpg');

            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        #header {
            width: 600px;
            height: 300px;
            display: flex;

            /* Utiliser Flexbox pour la disposition */
            flex-direction: column;
            /* Afficher les √©l√©ments en colonne */
            justify-content: center;
            /* Centrer verticalement */
            text-align: left;
            /* Aligner le texte √† gauche */
            color: #fff;
            padding-top: 50px;
            margin: 0 auto;
            /* Centrer horizontalement */
        }

        #header h1 {
            font-size: 48px;
            font-weight: bold;
        }

        #container {
            padding: 20px;
            text-align: center;
        }

        #destination-form {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            display: inline-block;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: left;
            width: 450px;
            margin: 0 auto;
        }

        .input-container {
            text-align: right;
            /* Aligner le texte √† droite pour les champs de saisie et les √©l√©ments de s√©lection */
        }

        #destination-form label {
            text-align: left;
            /* Aligner les labels √† gauche */
            display: inline-block;
            /* Faire en sorte que les labels occupent la largeur n√©cessaire */
            width: 100px;
            /* D√©finir une largeur fixe pour les labels (ajustez selon vos besoins) */
            margin-right: 20px;
            /* Ajouter une marge √† droite pour s√©parer les labels des champs */
        }

        /* Styles pour les champs de saisie */
        .input-container input[type="text"],
        .input-container input[type="email"],
        .input-container input[type="tel"] {
            width: 280px;
            /* D√©finir la largeur √† 100% pour remplir la largeur du conteneur */
            padding: 10px;
            /* Ajouter un espace int√©rieur pour une apparence am√©lior√©e */
            margin-bottom: 10px;
            /* Ajouter de l'espace entre les champs */
            border: 1px solid #ccc;
            /* Ajouter une bordure pour d√©limiter les champs */
            border-radius: 5px;
            /* Arrondir les coins */
            font-size: 16px;
            /* D√©finir la taille de police */
            text-align: right;
        }

        .input-container select {
            width: 300px;
            /* D√©finir la largeur √† 100% pour remplir la largeur du conteneur */
            padding: 10px;
            /* Ajouter un espace int√©rieur pour une apparence am√©lior√©e */
            margin-bottom: 10px;
            /* Ajouter de l'espace entre les champs */
            border: 1px solid #ccc;
            /* Ajouter une bordure pour d√©limiter les champs */
            border-radius: 5px;
            /* Arrondir les coins */
            font-size: 16px;
            /* D√©finir la taille de police */
            text-align: right;
        }

        .input-container button {
            background-color: #007bff;
            width: 100px;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
        }

        /* Styles pour la pop-up */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
        }

        #modal-content {
            background-color: #fff;
            margin: 30% auto;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="header">
        <h1 id="titre">Ce week-end <br />je m'√©vade √† ...</h1>
    </div>

    <div id="container">
        <form id="destination-form">
            <div class="input-container">
                <label for="nom">Nom :</label>
                <input type="text" id="nom" name="nom" required />
            </div>

            <div class="input-container">
                <label for="prenom">Pr√©nom :</label>
                <input type="text" id="prenom" name="prenom" required />
            </div>

            <div class="input-container">
                <label for="ville">Ville :</label>
                <select id="ville" name="ville">
                    <!-- Options du select -->
                </select>
            </div>

            <div class="input-container">
                <label for="email">Email :</label>
                <input type="email" id="email" name="email">
            </div>

            <div class="input-container">
                <label for="telephone">T√©l√©phone :</label>
                <input type="tel" id="telephone" name="telephone">
            </div>
            <div class="input-container">
                <button type="submit">Envoyer</button>
            </div>
        </form>
    </div>
    <div id="myModal" class="modal">
        <div id="modal-content">
            <p>Merci pour vos informations ! üåü Nous nous occupons de tout pour que vous puissiez vivre une exp√©rience
                inoubliable. üåç Votre prochaine destination de r√™ve sera bient√¥t pr√™te. Restez √† l'√©coute ! üó∫Ô∏è</p>
        </div>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // R√©cup√©rer le formulaire
        const form = document.getElementById("destination-form");
        // R√©cup√©rer la pop-up et le bouton de fermeture
        const modal = document.getElementById("myModal");
        const modalContent = document.getElementById("modal-content");
        peuplerSelectAvecVilles();
        mettreAJourTitre();

        // G√©rer la soumission du formulaire
        form.addEventListener("submit", function (event) {
            event.preventDefault(); // Emp√™cher l'envoi du formulaire par d√©faut

            // R√©cup√©rer les valeurs des champs
            const nom = document.getElementById("nom").value;
            const prenom = document.getElementById("prenom").value;
            const ville = document.getElementById("ville").value;
            const email = document.getElementById("email").value;
            const telephone = document.getElementById("telephone").value;

            // V√©rifier que soit l'email, soit le t√©l√©phone (ou les deux) sont remplis
            if (!email && !telephone) {

                modalContent.innerHTML = "Veuillez remplir au moins l'adresse email ou le num√©ro de t√©l√©phone."
                modal.style.display = "block";
                setTimeout(function () {
                    modal.style.display = "none";
                }, 3000);
                return;
            } else {
                if (nom && prenom) {
                    modal.style.display = "block";
                    form.style.display = "none";
                }
            }
        });
    });

    function trierParPopulationDecroissante(villes) {
        return villes.sort((a, b) => b.population - a.population);
    }

    // Fonction pour peupler le select avec les villes tri√©es par population d√©croissante
    function peuplerSelectAvecVilles() {
        const selectVilles = document.getElementById("ville"); // Remplacez "region" par l'ID de votre select

        // URL de l'API de l'INSEE pour obtenir les donn√©es sur les communes
        const apiUrl = "https://geo.api.gouv.fr/departements/59/communes?fields=nom,code,population&format=json&geometry=centre";

        // Faire une requ√™te GET √† l'API
        fetch(apiUrl)
            .then((response) => response.json())
            .then((data) => {
                // Trier les donn√©es par population d√©croissante
                const villesTrie = trierParPopulationDecroissante(data);

                // Parcourir les donn√©es tri√©es et ajouter chaque ville au select
                villesTrie.forEach((ville) => {
                    const option = document.createElement("option");
                    option.value = ville.nom;
                    option.textContent = ville.nom;
                    selectVilles.appendChild(option);
                });
            })
            .catch((error) => {
                console.error("Erreur lors de la r√©cup√©ration des donn√©es :", error);
            });
    }
    function mettreAJourTitre() {
        const selectVilles = document.getElementById("ville"); // Remplacez "region" par l'ID de votre select
        const titre = document.getElementById("titre"); // ID de votre titre

        // √âcouter l'√©v√©nement "change" sur le select
        selectVilles.addEventListener("change", function () {
            // Obtenir la valeur s√©lectionn√©e (le nom de la ville)
            const villeSelectionnee = selectVilles.value;

            // Mettre √† jour le titre avec la ville s√©lectionn√©e
            titre.innerHTML = `Ce week-end <br />je m'√©vade √† ${villeSelectionnee} !`;
        });
    }

</script>

</html>